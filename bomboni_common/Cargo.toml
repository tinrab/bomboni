[package]
name = "bomboni_common"
version = "0.1.60"
authors = ["Tin Rabzelj <tin@flinect.com>"]
description = "Common things for Bomboni library."
repository = "https://github.com/tinrab/bomboni"
homepage = "https://github.com/tinrab/bomboni"
license-file = "../LICENSE"
readme = "../README.md"
edition = "2021"

[lib]
name = "bomboni_common"
path = "src/lib.rs"

[features]
serde = ["dep:serde"]
tokio = ["dep:tokio", "dep:parking_lot"]
chrono = ["dep:chrono"]
wasm = [
  "dep:bomboni_wasm",
  "dep:js-sys",
  "dep:wasm-bindgen",
  "time/wasm-bindgen",
]
js = []
postgres = ["dep:postgres-types", "dep:bytes"]

[dependencies]
bomboni_wasm = { path = "../bomboni_wasm", version = "0.1.60", features = [
  "derive",
], optional = true }

thiserror = "1.0.63"
regex = "1.10.5"
time = { version = "0.3.36", features = ["formatting", "parsing"] }
ulid = "1.1.3"

tokio = { version = "1.39.1", features = ["time", "sync"], optional = true }
parking_lot = { version = "0.12.3", optional = true }
serde = { version = "1.0.204", features = ["derive"], optional = true }
chrono = { version = "0.4.38", optional = true }
postgres-types = { version = "0.2.7", features = [
  "with-time-0_3",
], optional = true }
bytes = { version = "1.6.1", optional = true }

[target.'cfg(all(target_family = "wasm", not(any(target_os = "emscripten", target_os = "wasi"))))'.dependencies]
wasm-bindgen = { version = "0.2.92", optional = true }
js-sys = { version = "0.3.69", optional = true }

[dev-dependencies]
serde_json = "1.0.120"
tokio = { version = "1.39.1", features = ["rt-multi-thread", "macros"] }
