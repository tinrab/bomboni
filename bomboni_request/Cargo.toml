[package]
name = "bomboni_request"
version = "0.1.60"
authors = ["Tin Rabzelj <tin@flinect.com>"]
description = "Utilities for working with API requests. Part of Bomboni library."
repository = "https://github.com/tinrab/bomboni"
homepage = "https://github.com/tinrab/bomboni"
license-file = "../LICENSE"
readme = "../README.md"
edition = "2021"

[lib]
name = "bomboni_request"
path = "src/lib.rs"

[features]
default = ["testing"]
testing = []
derive = []
tonic = ["bomboni_proto/tonic", "dep:tonic"]
wasm = [
  "dep:bomboni_wasm",
  "bomboni_common/wasm",
  "bomboni_proto/wasm",
  "dep:wasm-bindgen",
  "dep:js-sys",
  "dep:getrandom",
]
postgres = ["dep:postgres-types", "dep:bytes"]
# sqlx = ["compact_str/sqlx-mysql", "compact_str/sqlx-postgres"]
compact-str = [
  "dep:compact_str",
  "bomboni_common/compact-str",
  "bomboni_proto/compact-str",
  "bomboni_request_derive/compact-str",
]

[dependencies]
bomboni_common = { path = "../bomboni_common", version = "0.1.60" }
bomboni_proto = { path = "../bomboni_proto", version = "0.1.60" }
bomboni_request_derive = { path = "../bomboni_request_derive", version = "0.1.60" }
bomboni_wasm = { path = "../bomboni_wasm", version = "0.1.60", features = [
  "derive",
], optional = true }

thiserror = "1.0.63"
prost = "0.13.1"
pest = "2.7.11"
pest_derive = "2.7.11"
base64ct = { version = "1.6.0", features = ["alloc"] }
aes-gcm = { version = "0.10.3", features = ["alloc"] }
blake2 = "0.10.6"
rsa = "0.9.6"
rand = "0.8.5"
regex = "1.10.5"
serde = { version = "1.0.204", features = ["derive"] }

tonic = { version = "0.12.1", optional = true }
getrandom = { version = "0.2.15", features = ["js"], optional = true }
postgres-types = { version = "0.2.7", features = [
  "with-time-0_3",
], optional = true }
bytes = { version = "1.6.1", optional = true }
compact_str = { version = "0.8.0", features = ["serde"], optional = true }

[target.'cfg(all(target_family = "wasm", not(any(target_os = "emscripten", target_os = "wasi"))))'.dependencies]
wasm-bindgen = { version = "0.2.92", optional = true }
js-sys = { version = "0.3.69", optional = true }

[dev-dependencies]
serde_json = "1.0.120"
